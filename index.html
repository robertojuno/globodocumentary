<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mappa Mondo Interattiva</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoTJsH/RvUpbmUAPzV53HtKzS9zFzFXWwF8/W+4="
     crossorigin=""/>
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; background-color: #f0f0f0; }
        #map {
            height: 100vh; /* La mappa occupa tutta l'altezza della finestra */
            width: 100%;
            background-color: #e0e0e0; /* Colore di fallback */
        }
        .info-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            z-index: 1000; /* Assicura che sia sopra la mappa */
            max-width: 300px;
            font-size: 0.9em;
        }
        .video-thumbnail {
            width: 100%;
            max-width: 200px;
            height: auto;
            display: block;
            margin-top: 10px;
            border-radius: 5px;
        }
        .popup-content a {
            color: #007bff;
            text-decoration: none;
        }
        .popup-content a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div id="map"></div>
    <div class="info-panel">
        <h2>Mappa Mondo Interattiva</h2>
        <p>Esplora il mondo! La mappa mostra un tema "giorno" o "notte" approssimativo in base all'ora locale.</p>
        <p>Clicca sui segnaposti per scoprire di più e guardare video.</p>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-2bZLp68e5n5Uq66hJvY0pWlY1F+0XFzF1rX9z4q9k+0="
     crossorigin=""></script>
    <script>
        // Funzione per determinare se è giorno o notte (approssimativo)
        function isDayTime() {
            const now = new Date();
            const hours = now.getHours();
            // Consideriamo giorno tra le 6 del mattino e le 7 di sera
            return hours >= 6 && hours < 19;
        }

        // Determina lo stile della mappa in base all'ora
        const mapStyleUrlDay = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'; // Stile giorno OpenStreetMap
        const mapStyleUrlNight = 'https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png'; // Stile notte (Stadia Maps - assicurati di controllare i termini d'uso)

        const currentMapStyle = isDayTime() ? mapStyleUrlDay : mapStyleUrlNight;

        // Inizializza la mappa Leaflet
        const map = L.map('map').setView([0, 0], 2); // Centrata sul mondo con zoom livello 2

        L.tileLayer(currentMapStyle, {
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            + (isDayTime() ? '' : ' | Map tiles by <a href="https://stadiamaps.com/">Stadia Maps</a>, © <a href="https://stadiamaps.com/copyright/">Stadia Maps</a> & <a href="https://openmaptiles.org/">OpenMapTiles</a> & <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')
        }).addTo(map);

        // Dati dei segnaposti (localizzazione e link video)
        const locations = [
            {
                name: "Torre Eiffel, Parigi",
                coords: [48.8584, 2.2945],
                description: "La famosa Torre Eiffel, simbolo di Parigi.",
                videoLink: "https://www.youtube.com/watch?v=R9_mK037JpM", // Sostituisci con il tuo link
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Tour_Eiffel_Wikimedia_Commons_%2827_July_2013%29.jpg/1200px-Tour_Eiffel_Wikimedia_Commons_%2827_July_2013%29.jpg" // Sostituisci con la tua miniatura
            },
            {
                name: "Colosseo, Roma",
                coords: [41.8902, 12.4922],
                description: "L'antico anfiteatro romano, icona di Roma.",
                videoLink: "https://www.youtube.com/watch?v=F_fGvNf0c6c",
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/1200px-Colosseo_2020.jpg"
            },
            {
                name: "Statua della Libertà, New York",
                coords: [40.6892, -74.0445],
                description: "Un simbolo di libertà e democrazia.",
                videoLink: "https://www.youtube.com/watch?v=sI9f-hKzYgA",
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Statue_of_Liberty%2C_NY.jpg/1200px-Statue_of_Liberty%2C_NY.jpg"
            },
            {
                name: "Taj Mahal, Agra",
                coords: [27.1751, 78.0421],
                description: "Un magnifico mausoleo in marmo bianco, patrimonio UNESCO.",
                videoLink: "https://www.youtube.com/watch?v=L-K01Yy-y_Q",
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Taj_Mahal_in_August_2017.jpg/1200px-Taj_Mahal_in_August_2017.jpg"
            },
            {
                name: "Sarajevo",
                coords: [43.8584, 18.2447],
                description: "La capitale della Bosnia ed Erzegovina, una città ricca di storia e cultura.",
                videoLink: "https://youtu.be/GqQKJHXoUD8?si=L-eus1QDnylT5eIj",
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Sarajevo_panorama_by_Adnan_Brkic.jpg/1200px-Sarajevo_panorama_by_Adnan_Brkic.jpg" // Esempio di miniatura
            },
            {
                name: "Campo Base Everest",
                coords: [28.0043, 86.8575],
                description: "Il punto di partenza per l'ascesa al Monte Everest, nel cuore dell'Himalaya.",
                videoLink: "https://youtu.be/q7_jPoJM-Jc?si=02AiyBZHxfew8iRZ",
                thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Everest_Base_Camp_Nepal_2015.jpg/1200px-Everest_Base_Camp_Nepal_2015.jpg" // Esempio di miniatura
            }
            // Aggiungi qui altri luoghi
        ];

        // Aggiungi i segnaposti alla mappa
        locations.forEach(location => {
            const popupContent = `
                <div class="popup-content">
                    <h3>${location.name}</h3>
                    <p>${location.description}</p>
                    ${location.thumbnail ? `<img src="${location.thumbnail}" class="video-thumbnail" alt="Miniatura video">` : ''}
                    <p><a href="${location.videoLink}" target="_blank">Guarda il video</a></p>
                </div>
            `;
            L.marker(location.coords).addTo(map)
                .bindPopup(popupContent);
        });
    </script>
</body>
</html>
